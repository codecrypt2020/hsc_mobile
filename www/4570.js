"use strict";(self.webpackChunkhsc_mobile=self.webpackChunkhsc_mobile||[]).push([[4570],{4570:(D,g,l)=>{l.r(g),l.d(g,{ChecklistActionPageModule:()=>z});var u=l(8583),f=l(665),o=l(7823),d=l(649),t=l(639),_=l(3037),C=l(3056),x=l(4714);function S(e,a){if(1&e&&(t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275elementStart(1,"ion-label"),t.\u0275\u0275text(2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("",n.dataObj.percent,"%")}}function v(e,a){if(1&e&&(t.\u0275\u0275elementStart(0,"div",22),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.dataObj.percent,"% ")}}function k(e,a){if(1&e&&(t.\u0275\u0275elementStart(0,"div",23),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&e){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1(" ",n.dataObj.percent,"% ")}}function I(e,a){1&e&&(t.\u0275\u0275elementStart(0,"p",24),t.\u0275\u0275text(1,"Pending"),t.\u0275\u0275elementEnd())}function b(e,a){1&e&&(t.\u0275\u0275elementStart(0,"p",25),t.\u0275\u0275text(1,"Completed"),t.\u0275\u0275elementEnd())}function P(e,a){1&e&&(t.\u0275\u0275elementStart(0,"p",26),t.\u0275\u0275text(1,"In Progress"),t.\u0275\u0275elementEnd())}function y(e,a){1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"Continue Inspection"),t.\u0275\u0275elementEnd())}function E(e,a){1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"Start Inspection"),t.\u0275\u0275elementEnd())}function A(e,a){1&e&&(t.\u0275\u0275elementStart(0,"span"),t.\u0275\u0275text(1,"Inspection Already Submitted"),t.\u0275\u0275elementEnd())}function O(e,a){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",27),t.\u0275\u0275elementStart(1,"ion-button",28),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(n);const s=t.\u0275\u0275nextContext();return s.openQuestionPage(s.status)}),t.\u0275\u0275template(2,y,2,0,"span",17),t.\u0275\u0275template(3,E,2,0,"span",17),t.\u0275\u0275template(4,A,2,0,"span",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&e){const n=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","In Progress"==n.status),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Pending"==n.status),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Completed"==n.status)}}function j(e,a){1&e&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275element(1,"hr",29),t.\u0275\u0275elementStart(2,"p",30),t.\u0275\u0275text(3,"Share Inspection"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"div",31),t.\u0275\u0275elementStart(5,"p",32),t.\u0275\u0275text(6,"Share Inspection"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd())}function w(e,a){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().openReportDetailsPage()}),t.\u0275\u0275elementStart(1,"ion-label",34),t.\u0275\u0275element(2,"ion-icon",35),t.\u0275\u0275text(3,"View Report "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}}function T(e,a){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",33),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().openCheckListReportNS()}),t.\u0275\u0275elementStart(1,"ion-label",34),t.\u0275\u0275element(2,"ion-icon",36),t.\u0275\u0275text(3," Not Submitted "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}}function M(e,a){if(1&e){const n=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-item",37),t.\u0275\u0275listener("click",function(){return t.\u0275\u0275restoreView(n),t.\u0275\u0275nextContext().openDetailsPage()}),t.\u0275\u0275elementStart(1,"ion-label",34),t.\u0275\u0275element(2,"ion-icon",36),t.\u0275\u0275text(3," Details "),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}}const R=[{path:"",component:(()=>{class e{constructor(n,i,s,m,p,c){this.modalCtrl=n,this.router=i,this.appConstant=s,this.activatedRoute=m,this.updateData=p,this.restApi=c,this.newCheckListP=[],this.newCheckList=[],this.isShowBtn=!1,this.checklist_id=this.activatedRoute.snapshot.paramMap.get("checklist_id"),this.dataObj=JSON.parse(this.activatedRoute.snapshot.paramMap.get("item")),this.id=JSON.parse(this.activatedRoute.snapshot.paramMap.get("id")),this.status=this.activatedRoute.snapshot.paramMap.get("status")}ionViewDidEnter(){this.loadCHKData(this.checklist_id)}loadCHKData(n){let i={page:0,searchText:"",sortby:"",whereData:[{field:"`employee`.`plant_ref_id`",value:this.appConstant.getPlantId(),type:"AND",nested:""},{field:"`employee`.`emp_type_ref_id`",value:"1",type:"AND",nested:"("},{field:"`employee`.`emp_type_ref_id`",value:"2",type:"OR",nested:")"}]};this.restApi.getChkListAssignedList(i).then(s=>{this.newCheckList=[],this.newCheckListP=[],this.newCheckList=s.data,this.newCheckListP=s.data_percent;let p=0,c=[];this.newCheckList.forEach(r=>{let h=this.newCheckListP[p],N=Object.assign(Object.assign({},r),h);c.push(N),p++}),c.sort((r,h)=>Number(r.percent)>Number(h.percent)?1:-1),c.forEach(r=>{r.checkId==n&&r.id==this.id&&(this.dataObj=r,this.status=this.appConstant.getCurrentStatus(r.percent))})},s=>{this.appConstant.handleApiError(s)})}ngOnInit(){localStorage.setItem("dataUpdate","1"),this.updateData.dataChangeState.next(!0),this.isShowActionBtn()}closeModel(){"user"==this.appConstant.getRoleById(localStorage.getItem(this.appConstant.TAG_IS_USER_ROLE))?this.router.navigateByUrl("/users/tabs/inspections"):this.router.navigateByUrl("/admin/tabs/inspections")}openQuestionPage(n){"Completed"!=n?"SD"==this.dataObj.identifier?(this.router.navigate(["/self-d",{checklist_id:this.checklist_id}]),this.modalCtrl.dismiss()):this.router.navigate(["/checklist",{checklist_id:this.checklist_id,item:JSON.stringify(this.dataObj),id:this.id,status:this.status}]):this.appConstant.toastMsg("Checklist already submitted.")}isShowActionBtn(){this.isShowBtn="user"==this.getUserRole()||1==this.dataObj.is_filled&&this.dataObj.emp_id==localStorage.getItem(this.appConstant.TAG_IS_USER_ID)}getUserRole(){return this.appConstant.getUserType()}openDetailsPage(){this.router.navigate(["/checklist-view",{checklist_id:this.checklist_id,item:JSON.stringify(this.dataObj),id:this.id,is_submitted:"0",by_sc:"action",status:this.status}])}openReportDetailsPage(){localStorage.setItem("ins_tab",""),this.router.navigate(["/checklist-by-submitted",{checklist_id:this.checklist_id,is_submitted:"0",item:JSON.stringify(this.dataObj),id:this.id,status:this.status}])}openCheckListReportNS(){localStorage.setItem("ins_tab",""),this.router.navigate(["/checklist-by-submitted",{checklist_id:this.checklist_id,is_submitted:"1",item:JSON.stringify(this.dataObj),id:this.id,status:this.status}])}}return e.\u0275fac=function(n){return new(n||e)(t.\u0275\u0275directiveInject(o.ModalController),t.\u0275\u0275directiveInject(d.F0),t.\u0275\u0275directiveInject(_.Z),t.\u0275\u0275directiveInject(d.gz),t.\u0275\u0275directiveInject(C.X),t.\u0275\u0275directiveInject(x.e))},e.\u0275cmp=t.\u0275\u0275defineComponent({type:e,selectors:[["app-checklist-action"]],decls:35,vars:14,consts:[["mode","md",1,"ionToolbar"],["slot","start"],[1,"margin10","text-color-primary","font-size1-heading","headingFont"],["slot","secondary",2,"padding-right","4px !important"],[1,"headingFont","font-size-heading","doneCss",3,"click"],["lines","none"],[2,"display","flex !important"],["class","progressCircleP",4,"ngIf"],["class","progressCircleIP",4,"ngIf"],["class","progressCircleC",4,"ngIf"],[2,"margin-top","12px","margin-left","8px","width","100%"],[1,"font-size-heading","headingFont",2,"color","#455A64 !important"],[1,"font-size-content","lightFont",2,"color","#888787 !important"],["class","font-size-content lightFont statusCSSPending","style","width:100px;",4,"ngIf"],["class","font-size-content lightFont statusCSSCompleted","style","width:100px;",4,"ngIf"],["class","font-size-content lightFont statusCSSInP","style","width:100px;",4,"ngIf"],["style","margin: 20px;",4,"ngIf"],[4,"ngIf"],[2,"background","#e8e7e7","margin-top","16px","margin-bottom","0px"],["style","padding-left: 10px;",3,"click",4,"ngIf"],["style","padding-left: 10px;display: none !important;",3,"click",4,"ngIf"],[1,"progressCircleP"],[1,"progressCircleIP"],[1,"progressCircleC"],[1,"font-size-content","lightFont","statusCSSPending",2,"width","100px"],[1,"font-size-content","lightFont","statusCSSCompleted",2,"width","100px"],[1,"font-size-content","lightFont","statusCSSInP",2,"width","100px"],[2,"margin","20px"],["expand","block",2,"margin","10px","text-transform","capitalize",3,"click"],[2,"background","#e8e7e7","margin-top","24px","margin-bottom","0px"],[1,"font-size-input","headingFont","actionCss",2,"padding-left","30px"],[2,"padding-left","48px","padding-right","48px"],[1,"shareCss"],[2,"padding-left","10px",3,"click"],[1,"font-size-input","lightFont","actionCss"],["name","eye-outline","slot","start",2,"margin-inline-end","8px !important","margin-inline-start","4px !important"],["name","document-text-outline","slot","start",2,"margin-inline-end","8px !important","margin-inline-start","4px !important"],[2,"padding-left","10px","display","none !important",3,"click"]],template:function(n,i){1&n&&(t.\u0275\u0275elementStart(0,"ion-header"),t.\u0275\u0275elementStart(1,"ion-toolbar",0),t.\u0275\u0275elementStart(2,"ion-buttons",1),t.\u0275\u0275elementStart(3,"ion-title"),t.\u0275\u0275element(4,"p",2),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-buttons",3),t.\u0275\u0275elementStart(6,"div"),t.\u0275\u0275elementStart(7,"p",4),t.\u0275\u0275listener("click",function(){return i.closeModel()}),t.\u0275\u0275text(8," Close"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275element(9,"ion-title"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(10,"ion-content"),t.\u0275\u0275elementStart(11,"div"),t.\u0275\u0275elementStart(12,"div"),t.\u0275\u0275elementStart(13,"div"),t.\u0275\u0275elementStart(14,"ion-item",5),t.\u0275\u0275elementStart(15,"div",6),t.\u0275\u0275elementStart(16,"div",1),t.\u0275\u0275template(17,S,3,1,"div",7),t.\u0275\u0275template(18,v,2,1,"div",8),t.\u0275\u0275template(19,k,2,1,"div",9),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(20,"ion-label",10),t.\u0275\u0275elementStart(21,"p",11),t.\u0275\u0275text(22),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(23,"p",12),t.\u0275\u0275text(24),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(25,I,2,0,"p",13),t.\u0275\u0275template(26,b,2,0,"p",14),t.\u0275\u0275template(27,P,2,0,"p",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(28,O,5,3,"div",16),t.\u0275\u0275template(29,j,7,0,"div",17),t.\u0275\u0275element(30,"hr",18),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(31,"div"),t.\u0275\u0275template(32,w,4,0,"ion-item",19),t.\u0275\u0275template(33,T,4,0,"ion-item",19),t.\u0275\u0275template(34,M,4,0,"ion-item",20),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n&&(t.\u0275\u0275advance(17),t.\u0275\u0275property("ngIf",0==i.dataObj.percent),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",99>i.dataObj.percent&&i.dataObj.percent>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",100==i.dataObj.percent),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("",i.dataObj.name," "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate2(" ",i.dataObj.cat_name," - ",i.dataObj.emp_name,""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",0==i.dataObj.percent),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",100==i.dataObj.percent),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",99>i.dataObj.percent&&i.dataObj.percent>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",i.isShowBtn),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Completed"==i.status),t.\u0275\u0275advance(3),t.\u0275\u0275property("ngIf","user"!=i.getUserRole()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","user"!=i.getUserRole()),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","Completed"==i.status))},directives:[o.IonHeader,o.IonToolbar,o.IonButtons,o.IonTitle,o.IonContent,o.IonItem,u.NgIf,o.IonLabel,o.IonButton,o.IonIcon],styles:[".doneCss[_ngcontent-%COMP%]{margin:0!important;text-align:end;color:#0f5def;padding-right:16px!important}.shareCss[_ngcontent-%COMP%]{margin:4px;text-align:center;border:1px solid #2361d4;padding:12px;border-radius:5px}.itemCss[_ngcontent-%COMP%]{padding-left:10px;padding-bottom:10px;padding-top:10px}"]}),e})()}];let F=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[d.Bz.forChild(R)],d.Bz]}),e})(),z=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=t.\u0275\u0275defineInjector({imports:[[u.CommonModule,f.FormsModule,o.IonicModule,F]]}),e})()}}]);