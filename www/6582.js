"use strict";(self.webpackChunkhsc_mobile=self.webpackChunkhsc_mobile||[]).push([[6582],{6582:(A,g,o)=>{o.r(g),o.d(g,{ChecklistViewPageModule:()=>F});var l=o(8583),u=o(665),r=o(7823),p=o(649),f=o(4762),x=o(2340),_=o(8834),t=o(639),v=o(3037),C=o(4714),b=o(7961),I=o(9457);function k(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"p",13),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const i=t.\u0275\u0275nextContext().index,e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("Selected Answer : ",e.getSAns(e.checklistSD[i]),"")}}function S(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"p",13),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const i=t.\u0275\u0275nextContext().index,e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("Input Answer : ",e.getIAns(e.checklistSD[i]),"")}}function w(n,a){1&n&&(t.\u0275\u0275elementStart(0,"p",13),t.\u0275\u0275text(1,"Uploaded Images : "),t.\u0275\u0275elementEnd())}function y(n,a){if(1&n){const i=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"ion-col",18),t.\u0275\u0275elementStart(1,"div",19),t.\u0275\u0275elementStart(2,"img",20),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(i);const s=a.$implicit,c=t.\u0275\u0275nextContext(3);return c.viewImage(c.baseUrl+s)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const i=a.$implicit,e=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate2("src","",e.baseUrl,"",i,"",t.\u0275\u0275sanitizeUrl)}}function D(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"ion-list",15),t.\u0275\u0275elementStart(2,"ion-row",16),t.\u0275\u0275template(3,y,3,2,"ion-col",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const i=t.\u0275\u0275nextContext().index,e=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275property("ngForOf",e.saved_Images[i])}}function M(n,a){if(1&n&&(t.\u0275\u0275elementStart(0,"div"),t.\u0275\u0275elementStart(1,"ion-card-header"),t.\u0275\u0275elementStart(2,"span",10),t.\u0275\u0275text(3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(4,"span",10),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"ion-card-content",11),t.\u0275\u0275template(7,k,2,1,"p",12),t.\u0275\u0275template(8,S,2,1,"p",12),t.\u0275\u0275elementStart(9,"p",13),t.\u0275\u0275text(10),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(11,w,2,0,"p",12),t.\u0275\u0275template(12,D,4,1,"div",14),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const i=a.$implicit,e=a.index,s=t.\u0275\u0275nextContext();t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1(" ",e+1," . "),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1(" ",i.question," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","1"==i.question_type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","2"==i.question_type),t.\u0275\u0275advance(2),t.\u0275\u0275textInterpolate1("Comments : ",s.getComments(s.checklistSD[e]),""),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.getILength(s.saved_Images[e])>0),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",s.getILength(s.saved_Images[e])>0)}}const P=[{path:"",component:(()=>{class n{constructor(i,e,s,c,d,h,m){this.appConstant=i,this.router=e,this.activatedRoute=s,this.restApi=c,this.pdfGenerator=d,this.photoViewer=h,this.modalCtrl=m,this.userName="User",this.isSubmitted="0",this.d=new Date,this.todayDate=this.d.getFullYear()+"-"+(this.d.getMonth()+1)+"-"+this.d.getDate(),this.selectedStartDate=this.todayDate,this.user_id="",this.baseUrl=x.N.NODE_URL+"public/answer/",this.checklistSD=[],this.questionlist=[],this.saved_Images=[],this.checklist_id=this.activatedRoute.snapshot.paramMap.get("checklist_id"),this.userName=this.activatedRoute.snapshot.paramMap.get("name");try{this.isSubmitted=this.activatedRoute.snapshot.paramMap.get("is_submitted")}catch(V){this.isSubmitted="0"}this.item=JSON.parse(this.activatedRoute.snapshot.paramMap.get("item")),this.status=this.activatedRoute.snapshot.paramMap.get("status");try{this.by_sc=this.activatedRoute.snapshot.paramMap.get("by_sc")}catch(V){this.by_sc=""}this.id=JSON.parse(this.activatedRoute.snapshot.paramMap.get("id")),this.user_id=JSON.parse(this.activatedRoute.snapshot.paramMap.get("user_id")),this.loadDate(),this.loadDetails()}calendarModal(){return(0,f.__awaiter)(this,void 0,void 0,function*(){const i={pickMode:"single",from:new Date(2021,0,1),to:new Date,title:"Date",color:"secondary",closeLabel:"Cancel",doneLabel:"Done",defaultScrollTo:new Date};let e=yield this.modalCtrl.create({component:_.CalendarModal,componentProps:{options:i}});e.present();const c=(yield e.onDidDismiss()).data;null!=c&&(this.selectedStartDate=c.string,this.loadDetails())})}loadDate(){new l.DatePipe("en-US");const e=new Date;(new Date).setDate(e.getDate())}ngOnInit(){}ViewPDf(){this.router.navigate(["/pdfview",{is_submitted:this.isSubmitted,checklist_id:this.checklist_id,item:JSON.stringify(this.item),id:this.id,date:this.selectedStartDate,user_id:this.user_id,by_sc:this.by_sc,status:this.status}])}loadDetails(){if(!this.appConstant.isInternet)return null;this.restApi.getQuestionByID({checklistId:this.checklist_id}).then(e=>{1==e.success&&(this.questionlist=e.data,this.loadAnswerNew())},e=>{this.appConstant.handleApiError(e)})}loadAnswerNew(){this.checklistSD=[],this.saved_Images=[],this.restApi.getCheckListAnswerDetails({checklistId:this.checklist_id,date:this.selectedStartDate,userId:this.user_id}).then(e=>{if(1==e.success){let s=[];s=e.data;let c=0;this.questionlist.forEach(d=>{try{d.id==s[c].question_ref_id?(this.checklistSD.push(s[c]),this.saved_Images.push(s[c].images.split(",")),c++):(this.checklistSD.push({comments:"N/A",images:[],input_answer:"N/A",question_ref_id:d.id,selected_options:"N/A"}),this.saved_Images.push([]))}catch(h){this.checklistSD.push({comments:"N/A",images:[],input_answer:"N/A",question_ref_id:d.id,selected_options:"N/A"}),this.saved_Images.push([])}})}},e=>{this.appConstant.handleApiError(e)})}getComments(i){try{return i.comments}catch(e){return"N/A"}}getSAns(i){try{return i.selected_options}catch(e){return"N/A"}}getIAns(i){try{return i.input_answer}catch(e){return"N/A"}}getILength(i){try{return i.length}catch(e){return 0}}viewImage(i){this.photoViewer.show(i)}goBack(){this.router.navigate("action"==this.by_sc?["/checklist-action",{is_submitted:this.isSubmitted,checklist_id:this.checklist_id,item:JSON.stringify(this.item),id:this.id,by_sc:this.by_sc,status:this.status}]:["/checklist-by-submitted",{is_submitted:this.isSubmitted,checklist_id:this.checklist_id,item:JSON.stringify(this.item),id:this.id,by_sc:this.by_sc,status:this.status}])}}return n.\u0275fac=function(i){return new(i||n)(t.\u0275\u0275directiveInject(v.Z),t.\u0275\u0275directiveInject(p.F0),t.\u0275\u0275directiveInject(p.gz),t.\u0275\u0275directiveInject(C.e),t.\u0275\u0275directiveInject(b.r),t.\u0275\u0275directiveInject(I.h),t.\u0275\u0275directiveInject(r.ModalController))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-checklist-view"]],decls:16,vars:5,consts:[["mode","md",1,"ionToolbar"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back-outline",1,"TabBarIcon"],[2,"padding","0px !important"],[1,"margin10","text-color-black","font-size1-heading","lightFont",2,"text-align","center !important"],["slot","end"],["name","arrow-down-circle","slot","icon-only"],[1,"marginLeft","p1","text-color-primary","font-size-sub-heading","headingFont","pClose",3,"click"],[4,"ngFor","ngForOf"],[1,"marginLeft","font-size-heading","headingFont"],[1,"marginLeft","p1","text-color-primary","font-size-content","headingFont"],["class","font-size-input lightFont","style","color:#000 !important;",4,"ngIf"],[1,"font-size-input","lightFont",2,"color","#000 !important"],[4,"ngIf"],[2,"padding-bottom","0px"],[2,"margin","4px !important"],["class","thumbnail","size","4",4,"ngFor","ngForOf"],["size","4",1,"thumbnail"],[2,"height","120px","padding","4px","border","1px solid #ccc","border-radius","10px"],["alt","","onerror","this.onerror=null;this.src='assets/imgs/n-i2.png';",1,"user-profile-img",2,"border-radius","10px","height","100%","width","100%","object-fit","cover",3,"src","click"]],template:function(i,e){1&i&&(t.\u0275\u0275elementStart(0,"ion-header"),t.\u0275\u0275elementStart(1,"ion-toolbar",0),t.\u0275\u0275elementStart(2,"ion-buttons",1),t.\u0275\u0275elementStart(3,"ion-button",2),t.\u0275\u0275listener("click",function(){return e.goBack()}),t.\u0275\u0275element(4,"ion-icon",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-title",4),t.\u0275\u0275elementStart(6,"p",5),t.\u0275\u0275text(7,"Inspection Details"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"ion-buttons",6),t.\u0275\u0275elementStart(9,"ion-button",2),t.\u0275\u0275listener("click",function(){return e.ViewPDf()}),t.\u0275\u0275element(10,"ion-icon",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"ion-content"),t.\u0275\u0275elementStart(12,"p",8),t.\u0275\u0275listener("click",function(){return e.calendarModal()}),t.\u0275\u0275text(13),t.\u0275\u0275pipe(14,"date"),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(15,M,13,7,"div",9),t.\u0275\u0275elementEnd()),2&i&&(t.\u0275\u0275advance(13),t.\u0275\u0275textInterpolate1(" Selected Date : ",t.\u0275\u0275pipeBind2(14,2,e.selectedStartDate,"MMM d, y")," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngForOf",e.questionlist))},directives:[r.IonHeader,r.IonToolbar,r.IonButtons,r.IonButton,r.IonIcon,r.IonTitle,r.IonContent,l.NgForOf,r.IonCardHeader,r.IonCardContent,l.NgIf,r.IonList,r.IonRow,r.IonCol],pipes:[l.DatePipe],styles:[".box[_ngcontent-%COMP%]{margin-left:12px;background-color:#fff;border-radius:10px;text-align:center;line-height:30px;color:#000;font-size:11px;font-weight:500;box-shadow:0 13px 50px -15px #f1f1f1}.innerDivCSS[_ngcontent-%COMP%]{margin-top:16px;width:150px;height:150px}.imgCss[_ngcontent-%COMP%]{width:100%!important;height:100%!important;background-position:center center;background-repeat:no-repeat;object-fit:contain;object-position:center}.openStatus[_ngcontent-%COMP%]{margin-right:16px!important;padding:4px 10px!important;border-radius:5px!important;border:1px solid #85D4A4!important;background:#E4FFF0!important;color:#85d4a4!important}.inProgressStatus[_ngcontent-%COMP%]{margin-right:16px!important;padding:4px 10px!important;border-radius:5px!important;border:1px solid #F19A4C!important;background:#FFF4EB!important;color:#f19a4c!important}.closeStatus[_ngcontent-%COMP%]{margin-right:16px!important;padding:4px 10px!important;border-radius:5px!important;border:1px solid #EE6C6C;background:#FEF1F0!important;color:#ee6c6c!important}.pOpen[_ngcontent-%COMP%]{background:#E4FFF0!important;color:#608f73!important;padding:5px 0 0;margin:0;text-align:center;height:30px}.pClose[_ngcontent-%COMP%]{background:#FEF1F0!important;color:#ee6c6c!important;padding:5px 0 0;margin:0;text-align:center;height:30px}.pIN_P_R[_ngcontent-%COMP%]{background:#fff4eb!important;color:#f19a4c!important;margin:0;padding:10px 4px 10px 12px}"]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(P)],p.Bz]}),n})(),F=(()=>{class n{}return n.\u0275fac=function(i){return new(i||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[l.CommonModule,u.FormsModule,r.IonicModule,E]]}),n})()}}]);