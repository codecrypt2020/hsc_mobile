"use strict";(self.webpackChunkhsc_mobile=self.webpackChunkhsc_mobile||[]).push([[7204],{7204:(V,g,o)=>{o.r(g),o.d(g,{PDFViewPageModule:()=>M});var p=o(8583),u=o(665),l=o(7823),m=o(649),f=o(2340),t=o(639),x=o(3037),_=o(4714),v=o(7961),w=o(9457);function b(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",18),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext(2);t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate(e.chk_name)}}function I(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"td"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().index,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("Selected Answer : ",i.getSelectedOptions(i.checklistSD[e]),"")}}function P(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"td"),t.\u0275\u0275text(1),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().index,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275textInterpolate1("Input Answer : ",i.checklistSD[e].input_answer,"")}}function y(n,s){1&n&&(t.\u0275\u0275elementStart(0,"ion-label"),t.\u0275\u0275text(1,"Uploaded Images : "),t.\u0275\u0275elementEnd())}function S(n,s){1&n&&(t.\u0275\u0275elementStart(0,"ion-label"),t.\u0275\u0275text(1,"Images Not Uploaded "),t.\u0275\u0275elementEnd())}function D(n,s){if(1&n){const e=t.\u0275\u0275getCurrentView();t.\u0275\u0275elementStart(0,"div",21),t.\u0275\u0275elementStart(1,"div",22),t.\u0275\u0275elementStart(2,"img",23),t.\u0275\u0275listener("click",function(){t.\u0275\u0275restoreView(e);const a=s.$implicit;return t.\u0275\u0275nextContext(3).viewImage(a)}),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()}if(2&n){const e=s.$implicit,i=t.\u0275\u0275nextContext(3);t.\u0275\u0275advance(2),t.\u0275\u0275propertyInterpolate2("src","",i.baseUrl,"",e,"",t.\u0275\u0275sanitizeUrl)}}function C(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"div",19),t.\u0275\u0275template(1,D,3,2,"div",20),t.\u0275\u0275elementEnd()),2&n){const e=t.\u0275\u0275nextContext().index,i=t.\u0275\u0275nextContext();t.\u0275\u0275advance(1),t.\u0275\u0275property("ngForOf",i.saved_Images[e])}}function E(n,s){if(1&n&&(t.\u0275\u0275elementStart(0,"table",13),t.\u0275\u0275elementStart(1,"tbody"),t.\u0275\u0275template(2,b,2,1,"div",14),t.\u0275\u0275elementStart(3,"tr"),t.\u0275\u0275elementStart(4,"th"),t.\u0275\u0275text(5),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(6,"tr"),t.\u0275\u0275template(7,I,2,1,"td",15),t.\u0275\u0275template(8,P,2,1,"td",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(9,"tr"),t.\u0275\u0275elementStart(10,"td"),t.\u0275\u0275text(11),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(12,"tr"),t.\u0275\u0275elementStart(13,"td"),t.\u0275\u0275elementStart(14,"p",16),t.\u0275\u0275template(15,y,2,0,"ion-label",15),t.\u0275\u0275template(16,S,2,0,"ion-label",15),t.\u0275\u0275elementEnd(),t.\u0275\u0275template(17,C,2,1,"div",17),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&n){const e=s.$implicit,i=s.index,a=t.\u0275\u0275nextContext();t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf",0==i),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate2("",i+1," . ",e.question," "),t.\u0275\u0275advance(2),t.\u0275\u0275property("ngIf","1"==e.question_type),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf","2"==e.question_type),t.\u0275\u0275advance(3),t.\u0275\u0275textInterpolate1("Comments : ",a.getCommets(a.checklistSD,i),""),t.\u0275\u0275advance(4),t.\u0275\u0275property("ngIf",a.isImages(a.checklistSD,i)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",!a.isImages(a.checklistSD,i)),t.\u0275\u0275advance(1),t.\u0275\u0275property("ngIf",a.isImages(a.checklistSD,i))}}const k=[{path:"",component:(()=>{class n{constructor(e,i,a,r,d,c){this.appConstant=e,this.router=i,this.activatedRoute=a,this.restApi=r,this.pdfGenerator=d,this.photoViewer=c,this.chk_name="Checklist-details",this.isSubmitted="0",this.imageLogo="https://www.momentumindia.in/wp-content/uploads/2021/07/Momentum-India-Logo.png",this.user_id="",this.d=new Date,this.todayDate=this.d.getFullYear()+"-"+(this.d.getMonth()+1)+"-"+this.d.getDate(),this.date=this.todayDate,this.baseUrl=f.N.NODE_URL+"public/answer/",this.checklistSD=[],this.questionlist=[],this.saved_Images=[],this.checklist_id=this.activatedRoute.snapshot.paramMap.get("checklist_id"),this.isSubmitted=this.activatedRoute.snapshot.paramMap.get("is_submitted"),this.userName=this.activatedRoute.snapshot.paramMap.get("name"),this.item=JSON.parse(this.activatedRoute.snapshot.paramMap.get("item")),this.status=this.activatedRoute.snapshot.paramMap.get("status"),this.user_id=this.activatedRoute.snapshot.paramMap.get("user_id");try{this.date=this.activatedRoute.snapshot.paramMap.get("date")}catch(h){this.date=""}try{this.by_sc=this.activatedRoute.snapshot.paramMap.get("by_sc")}catch(h){this.by_sc=""}this.id=JSON.parse(this.activatedRoute.snapshot.paramMap.get("id")),this.chk_name=this.item.name,this.loadDetails()}getCommets(e,i){return 0==e.length?"N/A":e[i].comments.length>3?e[i].comments:"N/A"}isImages(e,i){if(0==e.length)return!1;try{return this.saved_Images[i][0].length>5}catch(a){return!1}}loadDetails(){if(!this.appConstant.isInternet)return null;this.restApi.getQuestionByID({checklistId:this.checklist_id}).then(i=>{1==i.success&&(this.questionlist=i.data,this.loadAnswerNew())},i=>{this.appConstant.handleApiError(i)})}loadAnswerNew(){this.checklistSD=[],this.saved_Images=[],this.restApi.getCheckListAnswerDetails({checklistId:this.checklist_id,date:this.date,userId:this.user_id}).then(i=>{if(1==i.success){let a=[];a=i.data;let r=0;this.questionlist.forEach(d=>{try{d.id==a[r].question_ref_id?(this.checklistSD.push(a[r]),this.saved_Images.push(a[r].images.split(",")),r++):(this.checklistSD.push({comments:"N/A",images:[],input_answer:"N/A",question_ref_id:d.id,selected_options:"N/A"}),this.saved_Images.push([]))}catch(c){this.checklistSD.push({comments:"N/A",images:[],input_answer:"N/A",question_ref_id:d.id,selected_options:"N/A"}),this.saved_Images.push([])}})}},i=>{this.appConstant.handleApiError(i)})}getSelectedOptions(e){try{return null==e?"N/A":e[""]}catch(i){return"N/A"}}viewImage(e){this.photoViewer.show(e)}goBack(){this.router.navigate(["/checklist-view",{is_submitted:this.isSubmitted,checklist_id:this.checklist_id,item:JSON.stringify(this.item),id:this.id,date:this.date,user_id:this.user_id,by_sc:this.by_sc,status:this.status}])}ngOnInit(){}downloadInvoice(){this.content='<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width, initial-scale=1.0"> ',this.content+="<style>.card{color: white; height: 200px; border: 1px solid #ccc; padding: 10px; border-radius: 10px;}",this.content+=".cards{max-width: 1200px; margin: 0 auto; display: grid; grid-gap: 0.5rem;}@media (min-width: 300px){.cards{grid-template-columns: repeat(3, 1fr);}}@media (min-width: 600px){.cards{grid-template-columns: repeat(4, 1fr);}}@media (min-width: 1800px){.cards{grid-template-columns: repeat(4, 1fr);}}",this.content+="@supports (-webkit-touch-callout: none) {.cards { grid-template-columns: repeat(3, 1fr);}}</style></head><body> ",this.content+="<div> ",this.content+='<div style="text-align: end;margin: 5px;"><img class="user-profile-img" src="https://www.momentumindia.in/wp-content/uploads/2021/07/Momentum-India-Logo.png" alt="" style="width: 80px;"></div>',this.content+='<div style="border: 2px solid #6b6a6a;height: 100% !important;margin: 10px;padding: 20px;"> <h1 style="color:#E9CD00;text-align:center;">'+this.chk_name+"</h1> ";let e=0;this.questionlist.forEach(a=>{if(this.content+="<div>",this.content+='<p style="color:#000;text-align:left;font-size: 16px;">'+(e+1)+" . "+a.question+"</p>",this.content+='<p style="color:#000;text-align:left;font-size: 16px;">Selected Answer : '+this.getSelectedOptions(this.checklistSD[e])+"</p>",this.content+='<p style="color:#000;text-align:left;font-size: 16px;">Comments : '+this.getCommets(this.checklistSD,e)+"</p>",this.isImages(this.checklistSD,e)){this.content+='<p style="color:#000;text-align:left;font-size: 16px;">Uploaded Images :</p>',this.content+='<div class="cards"> ';let r=[];r=this.saved_Images[e],r.forEach(d=>{"https://adminmisafe.in:3004/public/answer/"!=d&&(this.content+='<div class="card"> <img src="'+(this.baseUrl+d)+'" alt="" style="border-radius: 10px;height: 100%;width: 100%;object-fit: cover;">',this.content+="</div>")}),this.content+="</div>"}this.content+="</div>",e++}),this.content+="</div></div></body></html>",this.pdfGenerator.fromData(this.content,{documentSize:"A4",type:"share",fileName:this.chk_name+".pdf"}).then(a=>{}).catch(a=>{})}}return n.\u0275fac=function(e){return new(e||n)(t.\u0275\u0275directiveInject(x.Z),t.\u0275\u0275directiveInject(m.F0),t.\u0275\u0275directiveInject(m.gz),t.\u0275\u0275directiveInject(_.e),t.\u0275\u0275directiveInject(v.r),t.\u0275\u0275directiveInject(w.h))},n.\u0275cmp=t.\u0275\u0275defineComponent({type:n,selectors:[["app-pdfview"]],decls:18,vars:1,consts:[["mode","md",1,"ionToolbar"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back-outline",1,"TabBarIcon"],[2,"padding","0px !important"],[1,"margin10","text-color-black","font-size1-heading","lightFont",2,"text-align","center !important"],["slot","end"],["name","arrow-down-circle","slot","icon-only"],["id","PrintReports"],[2,"text-align","end","margin","5px"],["src","https://www.momentumindia.in/wp-content/uploads/2021/07/Momentum-India-Logo.png","onerror","this.onerror=null;this.src='/assets/imgs/logo.png';","alt","",1,"user-profile-img",2,"width","80px"],[2,"border","1px solid #000","margin","10px","padding","10px"],["class","border-background-stylesheet",4,"ngFor","ngForOf"],[1,"border-background-stylesheet"],["style","text-align: center !important; color: #f3d11e;padding-top: 10px;padding-bottom: 10px;font-size: 22px;",4,"ngIf"],[4,"ngIf"],[2,"margin-top","0"],["class","cards",4,"ngIf"],[2,"text-align","center !important","color","#f3d11e","padding-top","10px","padding-bottom","10px","font-size","22px"],[1,"cards"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[2,"height","120px","padding","4px","border","1px solid #ccc","border-radius","10px"],["alt","","onerror","this.onerror=null;this.src='assets/imgs/n-i2.png';",2,"border-radius","10px","height","100%","width","100%","object-fit","cover",3,"src","click"]],template:function(e,i){1&e&&(t.\u0275\u0275elementStart(0,"ion-header"),t.\u0275\u0275elementStart(1,"ion-toolbar",0),t.\u0275\u0275elementStart(2,"ion-buttons",1),t.\u0275\u0275elementStart(3,"ion-button",2),t.\u0275\u0275listener("click",function(){return i.goBack()}),t.\u0275\u0275element(4,"ion-icon",3),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(5,"ion-title",4),t.\u0275\u0275elementStart(6,"p",5),t.\u0275\u0275text(7,"Download PDF"),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(8,"ion-buttons",6),t.\u0275\u0275elementStart(9,"ion-button",2),t.\u0275\u0275listener("click",function(){return i.downloadInvoice()}),t.\u0275\u0275element(10,"ion-icon",7),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(11,"ion-content"),t.\u0275\u0275element(12,"div"),t.\u0275\u0275elementStart(13,"div",8),t.\u0275\u0275elementStart(14,"div",9),t.\u0275\u0275element(15,"img",10),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementStart(16,"div",11),t.\u0275\u0275template(17,E,18,9,"table",12),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd(),t.\u0275\u0275elementEnd()),2&e&&(t.\u0275\u0275advance(17),t.\u0275\u0275property("ngForOf",i.questionlist))},directives:[l.IonHeader,l.IonToolbar,l.IonButtons,l.IonButton,l.IonIcon,l.IonTitle,l.IonContent,p.NgForOf,p.NgIf,l.IonLabel],styles:["table[_ngcontent-%COMP%]{font-family:arial,sans-serif;border-collapse:collapse;width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{border:0px solid #dddddd;text-align:left;padding:8px}.border-background-stylesheet[_ngcontent-%COMP%]{background:#fff;border-top:none}.card[_ngcontent-%COMP%]{color:#fff;height:auto}.cards[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;display:grid;grid-gap:.5rem}@media (min-width: 300px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media (min-width: 600px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}@media (min-width: 1800px){.cards[_ngcontent-%COMP%]{grid-template-columns:repeat(4,1fr)}}"]}),n})()}];let F=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[m.Bz.forChild(k)],m.Bz]}),n})(),M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.\u0275\u0275defineNgModule({type:n}),n.\u0275inj=t.\u0275\u0275defineInjector({imports:[[p.CommonModule,u.FormsModule,l.IonicModule,F]]}),n})()}}]);